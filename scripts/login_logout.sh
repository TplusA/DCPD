#! /bin/sh

if test $# -ge 2
then
    DEST="$1"
    shift
else
    DEST='r1000e'
fi

case $1
in
    tidal_login)
        BYTES='106 0x74 0x69 0x64 0x61 0x6c 0
               0x6c 0x2e 0x77 0x69 0x65 0x6d 0x61 0x6e 0x6e 0x40 0x74 0x61 0x2d 0x68 0x69 0x66 0x69 0x2e 0x63 0x6f 0x6d 0
               0x6c 0x61 0x6c 0x61 0x3f 0x31 0x39 0x37 0x38 0'
        ;;
    tidal_bad)
        BYTES='106 0x74 0x69 0x64 0x61 0x6c 0 0x61 0 0x62 0'
        ;;
    tidal_logout)
        BYTES='106 0x74 0x69 0x64 0x61 0x6c 0 0 0'
        ;;
    qobuz_login)
        BYTES='106 0x71 0x6f 0x62 0x75 0x7a 0
               0x6c 0x2e 0x77 0x69 0x65 0x6d 0x61 0x6e 0x6e 0x40 0x74 0x61 0x2d 0x68 0x69 0x66 0x69 0x2e 0x63 0x6f 0x6d 0
               0x6c 0x61 0x6c 0x61 0x3f 0x31 0x39 0x37 0x38 0'
        ;;
    qobuz_bad)
        BYTES='106 0x71 0x6f 0x62 0x75 0x7a 0 0x61 0 0x62 0'
        ;;
    qobuz_logout)
        BYTES='106 0x71 0x6f 0x62 0x75 0x7a 0 0 0'
        ;;
    deezer_login)
        BYTES='106 0x64 0x65 0x65 0x7a 0x65 0x72 0
               0x6c 0x2e 0x77 0x69 0x65 0x6d 0x61 0x6e 0x6e 0x40 0x74 0x61 0x2d 0x68 0x69 0x66 0x69 0x2e 0x63 0x6f 0x6d 0
               0x6c 0x61 0x6c 0x61 0x3f 0x31 0x39 0x37 0x38 0'
        ;;
    deezer_bad)
        BYTES='106 0x64 0x65 0x65 0x7a 0x65 0x72 0 0x61 0 0x62 0'
        ;;
    deezer_logout)
        BYTES='106 0x64 0x65 0x65 0x7a 0x65 0x72 0 0 0'
        ;;
    *)
        echo 'Invalid subcommand'
        echo 'Valid subcommands are:'
        grep '^ \+[^ *].*)$' <"$0" | sed 's/)//'
        exit 1
        ;;
esac

exec ./send_dcp_command.sh "$DEST" -- w $BYTES
