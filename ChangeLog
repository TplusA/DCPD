2017-07-14  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 3.6 released.

	* Appliances: Rename nonexistent appliance "MP 2500 HV" to
	  not-yet-released appliance "MP 2500 R".

	* UPnP: Device UUID shows up correctly on CalaBerbel.

	* UPnP: Icon list is written to root XML file.

	* Stability: Fixed crash when encountering a NIC with locally
	  administered MAC address.

2017-06-07  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 3.5 released.

	* WLAN: Make WPS operation more stable.

	* WLAN: Enable canceling WPS connection attempt. To cancel, the SPI
	  slave needs to send "wps-abort" as security string.

	* Networking: Select appliance-specific fallback networking technology
	  for configuration in case there is no obvious candidate. This
	  enables WLAN configuration at any time in appliances with no
	  Ethernet.

	* Networking: Cancel WPS mode when Ethernet cable is plugged in.

2017-06-02  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 3.4 released.

	* WLAN: Enable WPS push-button method.

	* DCP protocol: Extended network status (register 50) for reporting
	  state of connection.

	* DCP protocol: Appliance ID set in register 87 has an effect now.
	  Currently, the ID determines the way the network devices are treated
	  and which MAC address is used for Airable. This version contains
	  hard-coded rules, which is a design flaw enforced by project
	  schedule. This issue is to be addressed in the future. Recognized
	  appliance IDs are R1000E, MP1000E, MP2000R, MP2500HV, MP3100HV,
	  CalaPlus, and CalaBerbel.

	* Networking: The network MAC addresses are read out based on
	  appliance ID. Filtering of ConnMan services by MAC address takes
	  immediate effect on appliance ID change.

	* TA Control: Fix very rarely occuring communication problem with
	  smartphone app.

	* Misc: Implement monitoring D-Bus interface for configuration value
	  changes. This interface was long defined, and has finally been
	  implemented.

	* Misc: Unknown command line arguments are ignored in daemon mode.
	  This is supposed to simplify ad-hoc upgrades and make regular
	  updates more fail-safe.

2017-04-10  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 3.3 released.

	* DCP protocol: Support fast forward and fast rewind commands. This
	  enables fast winding via remote control.

	* DCP protocol: Support stream seek commands. This enables jumping
	  to arbitrary stream positions via TA Control progress bar.

	* DCP protocol: Avoid sending cover art hash updates on continue from
	  pause mode and stream seeks.

2017-02-30  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 3.2 released.

	* Stability: Fixed communication with drcpd. Requires drcpd v3.3 for
	  full effect as there was also a bug on the other side.

	* Misc: Added extra log messages to help hunting down problems with
	  transferring cover art to the SPI slave.

2017-02-17  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 3.1 released.

	* XMODEM: Fix progress reports for downloaded files.

	* XMODEM: Fix progress reports for cover art.

2017-02-16  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 3.0 released: Changes of D-Bus interfaces were necessary
	  which break compatibility with older version, hence the change of
	  the major version.

	* Cover art: Integration with TACAMan. Pictures are retrieved for the
	  current stream, changes of cover art are monitored.

	* Cover art: SPI slave gets cover art change notifications via
	  register 210 and can retrieve pictures via XMODEM.

	* DCP protocol: Protocol level still at 1.0.2 because 2.13 was never
	  published.

2017-01-19  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 2.13 released.

	* Playback: Handle new stop signal emitted by streamplayer v2.0.
	  Required to keep the SPI slave informed about stopped streams.

	* Playback: Maximum bit rate can be configured from SPI slave via
	  register 95.

	* DCP protocol: Protocol level bumped to 1.0.2.

	* Misc: Configuration values can be distributed over D-Bus to the
	  various daemons using pairs of structured keys and values.
	  Configuration key owners must register with dcpd to make use of this
	  new feature.

2016-12-01  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 2.12 released.

	* Networking: WLAN connect is only triggered if neither a connection
	  attempt is in progress nor the connection attempt has failed before.

	* WLAN: Passwords shorter than 8 characters are accepted now.

2016-11-25  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 2.11 released.

	* Updates: Migration of network configuration data stored in old
	  format to new network.ini format. This allows updates from older
	  stable versions to the current version to succeed when done over
	  WLAN or specific non-DHCP Ethernet setups.

	* Updates: Wait for online state before telling opkg to start
	  downloading anything.

	* Debugging: Allow setting verbosity level over D-Bus.

2016-11-18  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 2.10 released.

	* Networking: Revert the workaround applied in v2.9. We are now
	  relying on an improved version of ConnMan which doesn't require such
	  silly things anymore.

2016-11-17  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 2.9 released.

	* Networking: Work around a bug in ConnMan that prevented showing
	  Airable listing on very first boot (or after recovery).

	* DCP protocol: Updates to register 75 and 76 are only sent to SPI
	  slave if their contents have actually changed.

2016-11-10  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 2.8 released.

	* Updates: Allow overriding the package repository configuration
	  regardless of configuration sent by SPI slave (for testing).

	* Updates: Fix update procedure for the case that nothing needs to be
	  done. The system now always reboots after an update request.

2016-11-10  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 2.7 released.

	* Updates: Do not perform check for partial system update states
	  introduced in v2.6 in case an update is in progress.

	* Updates: Do not tell SPI slave we are ready while an update is in
	  progress. Changes to register 17 are not reported in this case.

	* Updates: Do not allow SPI slave to request system reboot while an
	  update is in progress. A log message is emitted when such a request
	  gets ignored.

	* Updates: Reboot system if update appears to be in progress, but no
	  reboot occurs. This fixes the simplistic update script generated by
	  older versions of dcpd which fails to reboot the system in case opkg
	  returns with an error code.

	* Misc: In case binding to the smartphone app or DCP-over-TCP port
	  fails, still finish low-level initialization and do not stop early.
	  The result in previous versions was a log flooded with socket fd
	  errors (non-fatal, only annoying).

2016-11-04  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 2.6 released.

	* Networking: Suppress hidden networks in WLAN scan results. They
	  appeared as "(null)", but could not be used at all. Direct support
	  of hidden networks requires support by the user interface.

	* Updates: Attempt to fix up system update state if necessary. This
	  means that interrupted or otherwise incomplete system updates are
	  continued by running the generated upgrade script again. The user
	  will not notice because the status updates usually sent to the ARM
	  are suppressed in this case.

2016-10-25  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 2.5 released.

	* Networking: Fixed more network connection quirks caused by the new
	  way of interaction with ConnMan.

2016-10-21  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 2.4 released.

	* Networking: Fixed a few quirks caused by the new way of interaction
	  with ConnMan. There were all sorts of problems such as loss of WLAN
	  connections, failure to switch between networks, and even failure to
	  use WLAN at all (only possible with tricks). In particular, IPv6 is
	  explicitly disabled now.

	  WLAN connectivity should be OK by now.

	* Networking: Replacing WLAN adapters works. There was a problem that
	  prevented configuration of WLAN settings once the original WLAN
	  adapter was exchanged.

	* Networking: Waiting longer for very slow WLANs to connect.

	* Networking: DCP registers for reading out the network configuration
	  return more accurate data now. Before, the registers contained the
	  configuration that dcpd put as request to ConnMan. Now, the
	  registers contain what ConnMan has actually configured, independent
	  of requests posed by dcpd.

	* Updates: Enable installation of any release (back and forth between
	  versions of the same release flavor such as stable or testing, and
	  back and forth between the flavors).

	  This feature adds a lot of maintanance and system test burden if the
	  user is allowed to specify any arbitrary target version.

	* Logging: Reduce amount of log messages to spare CPU cycles. The
	  verbosity can be specified from the command line now, so despite
	  reduced amount of logs, debugging is easier now.


2016-10-05  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 2.3 released.

	* Updates: Enable configuration of update package feeds.

2016-09-30  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 2.2 released.

	* Networking: Enable use of ConnMan v1.33, supposedly fixing a few
	  networking problems. We now use D-Bus to push configuration changes
	  to ConnMan, and we implement the ConnMan agent API let ConnMan ask
	  for credentials. Network configuration data is stored in our own
	  configuration file, no more direct manipulation of files owned by
	  ConnMan.

2016-07-21  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 2.1 released.

	* Performance: Reduce amount of log messages to spare CPU cycles. This
	  is supposed to avoid stuttering audio playback at the start of
	  streams.

2016-06-27  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 2.0 released.

	* Communication with dcpspi: Major changes in the protocol between
	  dcpspi and dcpd. A small protocol has been added that encapsulates
	  DCP to get collision handling and synchronization right.

	  Collision handling is done completely within dcpd now (was mixed
	  handling in v1.x versions).

	* IP tunnel: Improved error messages.

2016-05-19  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 1.20 released.

	* UPnP: SPI slave can set the UPnP friendly name (register 88).

	* TA Control: Synchronize Airable login status between device and app.

	* Airable services: Allow SPI slave to delete service credentials for
	  services like Tidal. The device then automatically logs out from the
	  service.

	* DCP protocol: Proper protocol versioning. We are now at protocol
	  level 1.0.1. Setting the protocol to a specific level (this is
	  something which cannot be done from the outside at the moment) will
	  choose the register implementations as are correct for the selected
	  protocol level.

	* DCP protocol: Initial support for setting the appliance ID (register
	  87). The ID can be read out, but writing is not supported in this
	  version (writes are accepted and ignored). Also, the ID has no
	  effect whatsoever; it has been introduced only to get the DCP
	  command into the protocol implementation as soon as possible.

2016-05-03  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 1.19 released.

	* Stability: Fix concurrent access to meta data structure, very rarely
	  leading to messed up meta data, or maybe even crashes.

	* D-Bus: Adapt to latest changes in Streamplayer D-Bus interfaces.
	  Requires streamplayer 1.8 because of incompatible changes.

	* D-Bus: Adapt to latest changes in Airable authentication D-Bus
	  interfaces. Requires listbrokers 1.18 because of incompatible
	  changes.

2016-04-26  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 1.18 released.

	* TA Control: Detect broken connection between Streaming Board and
	  smartphone app in case the connection dies silently. This feature
	  comes at a minor prices: TCP keepalive with interval of 30 seconds
	  is employed, increasing overall network traffic a bit.

	* TA Control: The next stream register notification is avoided when
	  continuing playing a paused stream.

	* DCP protocol: Support SPI protocol level negotiation (register 1).

2016-04-14  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 1.17 released.

	* TA Control: Support structured meta data sent by smartphone app.

2016-04-08  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 1.16 released.

	* TA Control: Send information about externally started stream around.
	  The information is distributed via D-Bus signal. This information is
	  supposed to be caught by the user interface which should use it to
	  generate proper DRC screen updates.

2016-03-23  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 1.15 released.

	* DRCP: Recognize command codes 0x21 and 0x22 for fast scrolling
	  through lists.

2016-03-15  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 1.14 released.

	* Networking: Accept empty WLAN passphrases for unprotected networks.

	* Streaming: Activate play view when playing via register 79.

2016-03-01  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 1.13 released.

	* DCP protocol: Support search queries through register 74.

	* DCP protocol: URL registers are 1024 bytes now (were 512 bytes in
	  previous versions). This allows the SPI slave to process very long
	  URLs.

	* TA Control: Fix processing of Airable authentication URL requests.
	  Locale and IP address parameters were confused.

2016-02-18  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 1.12 released.

	* DCP protocol: Fix handling of unsupported registers.

	* DCP protocol: Fix spurious loss of protocol synchronization.

2016-02-12  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 1.11 released.

	* Airable services: Fix bug that prevented the SPI slave to send
	  service credentials for external services.

	* Bug fix: Avoid log disruption by very long messages.

2016-02-08  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 1.10 released.

	* TA Control: Support Airable access from smartphone app (small
	  protocol spoken on TCP port 8466). It is possible for the app to
	  establish connections with Airable by using passwords generated by
	  the Streaming Board. There is no reason to put the secret key into
	  the app anymore. Further, it is possible to read out credentials for
	  external services such a Tidal.

	* Airable services: Allow SPI slave to read out and manipulate
	  service credentials for services like Tidal. This is done through
	  new register 106.

2016-01-29  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 1.9 released.

	* Streaming: Allow smartphone apps to queue streams.

	* Streaming: Tell SPI slave title and URL of currently playing stream
	  through registers 75 and 76. This is necessary to get the
	  communication with the smartphone app on the SPI slave right.

	* Network status: Fix register 50 updates.

	* Misc: Various cosmetic changes.

2016-01-12  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 1.8 released.

	* WLAN: Attempt switching to WLAN mode when removing Ethernet cable.

	* Network configuration: Improve interoperability with SPI slave.

2015-12-16  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 1.7 released.

	* XMODEM: Fix CRC-16 computation; checksum is to be computed only for
	  the payload itself, not for the command header.

2015-12-08  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 1.6 released.

	* Networking: WLAN configuration is global and not bound to specific
	  interfaces. Swapping WLAN adapters while the system is running or
	  plugging in more than one adapter leads to undefined system
	  behavior.

	* Updates: System update can be started by SPI slave.

	* Bug fix: Fixed a crash.

2015-12-01  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 1.5 released.

	* Networking: WLAN site survey can be started by SPI slave, list of
	  discovered WLAN networks can be read out when done.

	* Misc: Several internal optimizations and improvements.

2015-11-02  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 1.4 released.

	* System shutdown: Use systemd and logind to inhibit system shutdown
	  until it is safe to do so. Files are closed when power off or reboot
	  is due. Corresponding internal APIs do not allow opening any new
	  files in this case.

	* DCP system reboot: Sending code 0x24/0x20 to register 40 triggers a
	  system reboot. This is implemented by sending a reboot request to
	  systemd.

	* DCP system power off: Sending DRC command for power off triggers a
	  system power down. This is implemented by sending a power off
	  request to systemd.

	* DCP status: Register 17 isn't fake anymore.

2015-09-10  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 1.3 released.

	* TCP tunnel: Initial implementation of TCP tunnels for incoming
	  connections (server side).

	  The SPI slave may ask to open one or more tunnels on any TCP port.
	  The Streaming Board will then listen on that port and forward any
	  data exchanged between the SPI slave and connecting clients using
	  DCP registers 119, 120, and 121.

	  It is not possible to initiate outgoing connections to external
	  servers using these kind of TCP tunnels.

2015-09-03  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 1.2 released.

	* Download files: Initial implementation of downloading files from the
	  internet using registers 40, 41, and 209. Requires D-Bus DL daemon.

	* XMODEM: Initial implementation of file transfers via XMODEM protocol
	  over DCP (registers 40, 41, 44, and 45). After a file that has been
	  downloaded by D-Bus DL, it's contents can be read by the SPI slave.

	* Misc: Various cosmetic changes.

2015-07-13  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 1.1 released.

	* Implement reading of network status register (register 50).
	  Also, status changes are automatically sent to the slave.

	* Implement reading software image build ID (register 37).

	* Show version information in log, add --version option.

2015-06-29  Robert Tiemann  <r.tiemann@ta-hifi.de>

	* Version 1.0 released.

	* First release for testing.


Copyright 2015, 2016, 2017 T+A elektroakustik GmbH & Co. KG
